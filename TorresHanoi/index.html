<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Torres de hanoi</title>
        <style type="text/css" media="all">
            body{
                background-color: silver;
            }
            body > section {
                width: 80%;
                border: 1px solid #ccc;
                height: 500px;
                margin: 0 auto;
                background-color: #efefef;
                position: relative;
            }
            .pilar{
                height: 90%;
                width: 1%;            
                position: absolute;            
                bottom: 0px;
                background: #4c4c4c; /* Old browsers */
                /* IE9 SVG, needs conditional override of 'filter' to 'none' */
                background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzRjNGM0YyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEyJSIgc3RvcC1jb2xvcj0iIzU5NTk1OSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjI1JSIgc3RvcC1jb2xvcj0iIzY2NjY2NiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjM5JSIgc3RvcC1jb2xvcj0iIzQ3NDc0NyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzJjMmMyYyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUxJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjYwJSIgc3RvcC1jb2xvcj0iIzExMTExMSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9Ijc2JSIgc3RvcC1jb2xvcj0iIzJiMmIyYiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjkxJSIgc3RvcC1jb2xvcj0iIzFjMWMxYyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMxMzEzMTMiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
                background: -moz-linear-gradient(left, #4c4c4c 0%, #595959 12%, #666666 25%, #474747 39%, #2c2c2c 50%, #000000 51%, #111111 60%, #2b2b2b 76%, #1c1c1c 91%, #131313 100%); /* FF3.6+ */
                background: -webkit-gradient(linear, left top, right top, color-stop(0%,#4c4c4c), color-stop(12%,#595959), color-stop(25%,#666666), color-stop(39%,#474747), color-stop(50%,#2c2c2c), color-stop(51%,#000000), color-stop(60%,#111111), color-stop(76%,#2b2b2b), color-stop(91%,#1c1c1c), color-stop(100%,#131313)); /* Chrome,Safari4+ */
                background: -webkit-linear-gradient(left, #4c4c4c 0%,#595959 12%,#666666 25%,#474747 39%,#2c2c2c 50%,#000000 51%,#111111 60%,#2b2b2b 76%,#1c1c1c 91%,#131313 100%); /* Chrome10+,Safari5.1+ */
                background: -o-linear-gradient(left, #4c4c4c 0%,#595959 12%,#666666 25%,#474747 39%,#2c2c2c 50%,#000000 51%,#111111 60%,#2b2b2b 76%,#1c1c1c 91%,#131313 100%); /* Opera 11.10+ */
                background: -ms-linear-gradient(left, #4c4c4c 0%,#595959 12%,#666666 25%,#474747 39%,#2c2c2c 50%,#000000 51%,#111111 60%,#2b2b2b 76%,#1c1c1c 91%,#131313 100%); /* IE10+ */
                background: linear-gradient(to right, #4c4c4c 0%,#595959 12%,#666666 25%,#474747 39%,#2c2c2c 50%,#000000 51%,#111111 60%,#2b2b2b 76%,#1c1c1c 91%,#131313 100%); /* W3C */
                filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4c4c4c', endColorstr='#131313',GradientType=1 ); /* IE6-8 */
            }
            .pilar1 {
                left: 24.5%;
            }
            .pilar2 {
                left: 49.5%;
            }
            .pilar3 {
                left: 74.5%;
            }
            .disco {
                position: absolute;
                height: 20px;
                width: 12.5%;
                border: 1px solid #111111;
                background: #000000; /* Old browsers */
                /* IE9 SVG, needs conditional override of 'filter' to 'none' */
              
                 background-color: #000000;
                filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#feccb1', endColorstr='#fb955e',GradientType=1 ); /* IE6-8 */
                transition: all .2s;
            }
            #btnAuto{
                margin-top: 20px;
                padding: 1.3em 3em;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 2.5px;
                font-weight: 500;
                color: #000;
                background-color: #fff;
                border: none;
                border-radius: 45px;
                box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease 0s;
                cursor: pointer;
                outline: none;
                
            }
            #btnAuto:hover{
                background-color: #131313;
                box-shadow: 0px 15px 20px rgba(0, 0, 6, 0.4);
                color: #fff;
                transform: translateY(-7px);
            }
            #btnAuto:active{
                transform: translateY(-1px);
            }
            #lstNumDiscos{
               background-color: white;
               color: #000000;
               width: 60px;
               text-align: center;
               height: 20px;
               border-radius: 2px;
            }
            #lstNumDiscos{
                margin-top: 20px;
            }
        </style>
        <script src="jquery-1.8.0.min.js" type="text/javascript"></script>
    </head>
    <body>
        <section id="discArea">
            <span class="pilar pilar1"></span>
            <span class="pilar pilar2"></span>
            <span class="pilar pilar3"></span>
        </section>
        <center>       <label for="lstNumDiscos">NÃºmero de discos:</label>
        <select id="lstNumDiscos">
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
        </select>
        <div>
            <button id="btnAuto">Comenzar</button>
        </div>
    </center>
 
        <script type="text/javascript">
            hanoi = {
                getNumDiscos: function () {
                    return parseInt($("#lstNumDiscos").val());
                },
                container: "#discArea",
                createDiscos: function () {
                    this.torres.torre1 = [];
                    this.torres.torre2 = [];
                    this.torres.torre3 = [];
                    var nd = this.getNumDiscos();
                    $(".disco").remove();
                    for (var i = 1; i <= nd; i++) {
                        var left = 25 - hanoi.medidas[i] / 2;
                        var bottom = (i - 1) * hanoi.altura;
                        $("<span>")
                            .addClass("disco")
                            .attr("data-num", i)
                            .css("width", this.medidas[i] + "%")
                            .css('left', left + "%")
                            .css("bottom", bottom + "px")
                            .appendTo(hanoi.container);
                        hanoi.torres.torre1.push(i);
                    }
                    
                },
                altura: 20,
                medidas: [0, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3.5, 3, 2],
                torres: {
                    torre1: [],
                    torre2: [],
                    torre3: []
                },
                init: function () {
                    this.create();
                    this.bindings();
                },
                bindings: function () {
                    $("#lstNumDiscos").on("change", function () {
                        hanoi.createDiscos();
                        clearInterval(hanoi.interval);
                    });
                    $("#btnMover").on("click", function () {
                        var ini = parseInt($("#lstInicial").val());
                        var fin = parseInt($("#lstFinal").val());
                        hanoi.mover(ini, fin);
                    });
                    $("#btnResolver").on("click", function () {
                        hanoi.resolver();
                    });
                    $("#btnSig").on("click", function () {
                        hanoi.sigPaso();
                    });
                    $("#btnAuto").on("click", function () { hanoi.resolverA(); });
                },
                create: function () {
                    this.createDiscos();
                    var num = this.getNumDiscos();
                    
                },
                mover: function (torreini, torrefin) {
                    var t = hanoi.torres['torre' + torreini].pop();
                    $(".disco[data-num='" + t + "']").css('left', (torrefin * 25 - hanoi.medidas[t] / 2) + "%").css("bottom", hanoi.torres['torre' + torrefin].length * hanoi.altura + "px");
                    hanoi.torres['torre' + torrefin].push(t);
                },
                hanoiRec: function (num, izq, der, cen) {
                    if (num == 1) {
                        this.sol.push([izq, der]);
                    } else {
                        this.hanoiRec(num - 1, izq, cen, der);
                        this.sol.push([izq, der]);
                        this.hanoiRec(num - 1, cen, der, izq);
                    }
                },
                resolver: function () {
                    this.create();
                    this.sol = [];
                    this.hanoiRec(this.getNumDiscos(), 1, 3, 2);
                    this.numMov = 0;
                    $("#movRestantes").text(this.sol.length);
                },
                sigPaso: function () {
                    var i = hanoi.numMov;
                    if (i < hanoi.sol.length) {
                        hanoi.mover(hanoi.sol[i][0], hanoi.sol[i][1]);
                        hanoi.numMov++;
                        $("#movRestantes").text(hanoi.sol.length - hanoi.numMov);
                    } else {
                        clearInterval(hanoi.interval);
                    }
                },
                resolverA: function () {
                    hanoi.resolver();
                    hanoi.interval = setInterval(hanoi.sigPaso, 500);
                }
            }
            hanoi.init();
        </script>
    </body>
</html>
